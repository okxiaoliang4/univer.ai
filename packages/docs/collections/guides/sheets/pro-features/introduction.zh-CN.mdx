import TitleTag from '@/components/title-tag'
import { Cards, Callout, Steps, Tabs } from 'nextra/components'

# é«˜çº§åŠŸèƒ½ç®€ä»‹

Univer çš„æ ¸å¿ƒæ¡†æ¶ä»¥åŠè®¸å¤šåŸºç¡€åŠŸèƒ½[åœ¨ GitHub ä¸Šå¼€æº](https://github.com/dream-num/univer)ï¼Œå¹¶åŸºäº Apache-2.0 æˆæƒåè®®å…è®¸ä¸ªäººä¸ç»„ç»‡å…è´¹ä½¿ç”¨ï¼ŒåŒæ—¶æˆ‘ä»¬ä¸ºä¼ä¸šç”¨æˆ·æä¾›äº†ä¸€ç³»åˆ—é«˜çº§åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š

- æ•°æ®é€è§†è¡¨
- æ‰“å°
- å¯¼å…¥å¯¼å‡º
- ååŒç¼–è¾‘ï¼ˆåŒ…å«ååŒå…‰æ ‡å’Œå†å²è®°å½•ï¼‰
- ååŒæµè§ˆ Live Share

ç­‰ç­‰ï¼Œè¿™äº›åŠŸèƒ½å°†ä¼šåœ¨æ–‡æ¡£ä¸­ä»¥ <span className="mr-2"><TitleTag /></span> æ ‡è¯†ã€‚

é«˜çº§åŠŸèƒ½åŸºäº Univer å•†ä¸šæˆæƒåè®®ï¼Œå¯ä»¥å…è´¹ä½¿ç”¨ï¼Œä¸è¿‡å­˜åœ¨ä¸€äº›é™åˆ¶ã€‚å¦‚æœä½ éœ€è¦è§£é”é™åˆ¶ï¼Œå¯ä»¥è”ç³»æˆ‘ä»¬çš„é”€å”®å›¢é˜Ÿä»¥è´­ä¹°è®¸å¯è¯ã€‚ä½ å¯ä»¥åœ¨ [è®¸å¯è¯](/guides/sheets/pro-features/license) ä¸€ç« äº†è§£ä½ æ˜¯å¦éœ€è¦è®¸å¯è¯ï¼Œä»¥åŠå¦‚ä½•è·å–å’Œä½¿ç”¨è®¸å¯è¯ã€‚

## é›†æˆ Univer é«˜çº§åŠŸèƒ½ [#integrate-advanced-features]

<Steps>
  ### å®‰è£…å¹¶è¿è¡ŒæœåŠ¡ç«¯

  ```shell
  bash -c "$(curl -fsSL https://get.univer.ai)"
  ```

  <Callout emoji="âš ï¸">
    å¦‚æœåœ¨å®‰è£…æˆ–ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼Œè¯·æŸ¥çœ‹[å¸¸è§é—®é¢˜](/guides/sheets/server/docker#troubleshooting)ã€‚
  </Callout>

  ### å®‰è£…å¹¶è¿è¡Œå®¢æˆ·ç«¯ [#install-and-run-the-frontend]

  <Tabs items={['pnpm', 'npm', 'ä»å• HTML æ–‡ä»¶å¼€å§‹']}>
    <Tabs.Tab>
      æ‰§è¡Œä»¥ä¸‹å‘½ä»¤éœ€è¦è®¾å¤‡å®‰è£…æœ‰ `nodejs >= 18`, `pnpm >= 7` å’Œ `git`ã€‚

      ```shell
      pnpm dlx degit dream-num/univer-pro-sheet-start-kit univer-pro-sheet-start-kit
      cd univer-pro-sheet-start-kit
      pnpm install
      pnpm dev
      ```
      <Callout emoji="âš ï¸">
        å¦‚æœæœåŠ¡ç«¯éƒ¨ç½²åœ¨å…¶ä»–æœºå™¨ä¸Šï¼Œéœ€è¦åœ¨ `vite.config.ts` ä¸­æŠŠ `server` é…ç½®é‡Œçš„ `localhost` æ”¹ä¸ºè¯¥æœºå™¨çš„ IP åœ°å€ã€‚
      </Callout>

      ğŸ‰ æ­å–œä½ ï¼Œä½ å·²æˆåŠŸåˆ›å»ºäº†åŒ…å«äº†æœåŠ¡ç«¯çš„ Univer é¡¹ç›®ï¼Œä½ å¯ä»¥è®¿é—® [http://localhost:5173/](http://localhost:5173/) ä½“éªŒé«˜çº§åŠŸèƒ½å’ŒååŒç¼–è¾‘ã€‚

      ä½ å¯ä»¥åœ¨ [dream-num/univer-pro-sheet-start-kit](https://github.com/dream-num/univer-pro-sheet-start-kit) æ‰¾åˆ°è¯¥æ¨¡æ¿çš„æºä»£ç ã€‚
    </Tabs.Tab>
    <Tabs.Tab>
      æ‰§è¡Œä»¥ä¸‹å‘½ä»¤éœ€è¦è®¾å¤‡å®‰è£…æœ‰ `nodejs >= 18`, `npm >= 8` å’Œ `git`ã€‚

      ```shell
      npx degit dream-num/univer-pro-sheet-start-kit univer-pro-sheet-start-kit
      cd univer-pro-sheet-start-kit
      npm install
      npm run dev
      ```
      <Callout emoji="âš ï¸">
        å¦‚æœæœåŠ¡ç«¯éƒ¨ç½²åœ¨å…¶ä»–æœºå™¨ä¸Šï¼Œéœ€è¦åœ¨ `vite.config.ts` ä¸­æŠŠ `server` é…ç½®é‡Œçš„ `localhost` æ”¹ä¸ºè¯¥æœºå™¨çš„ IP åœ°å€ã€‚
      </Callout>
      ğŸ‰ æ­å–œä½ ï¼Œä½ å·²æˆåŠŸåˆ›å»ºäº†åŒ…å«äº†æœåŠ¡ç«¯çš„ Univer é¡¹ç›®ï¼Œä½ å¯ä»¥è®¿é—® [http://localhost:5173/](http://localhost:5173/) ä½“éªŒé«˜çº§åŠŸèƒ½å’ŒååŒç¼–è¾‘ã€‚

      ä½ å¯ä»¥åœ¨ [dream-num/univer-pro-sheet-start-kit](https://github.com/dream-num/univer-pro-sheet-start-kit) æ‰¾åˆ°è¯¥æ¨¡æ¿çš„æºä»£ç ã€‚     
    </Tabs.Tab>
    <Tabs.Tab label="ä»å• HTML æ–‡ä»¶å¼€å§‹">
      å¦‚æœä½ æƒ³ä¸å€ŸåŠ©ä»»ä½•å‰ç«¯æ„å»ºå·¥å…·ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œ Univerï¼Œä½ å¯ä»¥å°†ä»¥ä¸‹ä»£ç å¤åˆ¶ä¿å­˜åˆ°ä¸€ä¸ª HTML æ–‡ä»¶ä¸­ï¼Œç„¶ååŒå‡»åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå³å¯ä½“éªŒæ‰“å°ã€ååŒç¼–è¾‘ã€å¯¼å…¥å¯¼å‡ºç­‰åŠŸèƒ½ã€‚

      ```html
      <!DOCTYPE html>
        <html lang="en">
        <head>
          <meta charset="UTF-8">
          <meta name="viewport" content="width=device-width, initial-scale=1.0">
          <title>
            Univer UMD With Collaboration, Live Share, Print, Exchange
          </title>
          <script src="https://unpkg.com/@univerjs/umd/lib/univer.full.umd.js"></script>
          <script src="https://unpkg.com/@univerjs/umd/lib/locale/zh-CN.js"></script>
          <link rel="stylesheet" href="https://unpkg.com/@univerjs/umd/lib/univer.css">
        
          <script src="https://unpkg.com/@univerjs-pro/license/lib/umd/index.js"></script>
          
          <script src="https://unpkg.com/@univerjs-pro/collaboration/lib/umd/index.js"></script>
          <script src="https://unpkg.com/@univerjs-pro/collaboration-client/lib/umd/index.js"></script>
          <link rel="stylesheet" href="https://unpkg.com/@univerjs-pro/collaboration-client/lib/index.css">
        
          <script src="https://unpkg.com/@univerjs-pro/live-share/lib/umd/index.js"></script>
          <link rel="stylesheet" href="https://unpkg.com/@univerjs-pro/live-share/lib/index.css">
        
          <script src="https://unpkg.com/@univerjs-pro/print/lib/umd/index.js"></script>
          <script src="https://unpkg.com/@univerjs-pro/sheets-print/lib/umd/index.js"></script>
          <link rel="stylesheet" href="https://unpkg.com/@univerjs-pro/sheets-print/lib/index.css">
        
          <script src="https://unpkg.com/@univerjs-pro/exchange-client/lib/umd/index.js"></script>
          <link rel="stylesheet" href="https://unpkg.com/@univerjs-pro/exchange-client/lib/index.css">
        
          <script src="https://unpkg.com/@univerjs-pro/sheets-exchange-client/lib/umd/index.js"></script>

          <script src="https://unpkg.com/@univerjs-pro/engine-pivot/lib/umd/index.js"></script>
          <script src="https://unpkg.com/@univerjs-pro/sheets-pivot/lib/umd/index.js"></script>
          <script src="https://unpkg.com/@univerjs-pro/sheets-pivot-ui/lib/umd/index.js"></script>
          <link rel="stylesheet" href="https://unpkg.com/@univerjs-pro/sheets-pivot-ui/lib/index.css">

          <script src="https://unpkg.com/@univerjs-pro/edit-history-viewer/lib/umd/index.js"></script>
          <script src="https://unpkg.com/@univerjs-pro/edit-history-loader/lib/umd/index.js"></script>
          <link rel="stylesheet" href="https://unpkg.com/@univerjs-pro/edit-history-viewer/lib/index.css">
          <style>
            body {
              margin: 0;
              padding: 0;
              font-family: Arial, sans-serif;
            }
        
            #app {
              height: 100vh;
              width: 100vw;
            }
          </style>
        </head>
        
        <body>
          <div id="app"></div>
          <script>
            var {
              UniverCore,
              UniverDesign,
              UniverEngineRender,
              UniverEngineFormula,
              UniverDocs,
              UniverDocsUi,
              UniverUi,
              UniverSheets,
              UniverSheetsUi,
              UniverSheetsNumfmt,
              UniverCollaboration,
              UniverCollaborationClient,
              UniverSheetsThreadComment,
              UniverExchangeClient,
              UniverFacade
            } = window;
            var { UniverSheetsFormulaPlugin } = UniverSheetsFormula;
            var { UniverSheetsExchangeClientPlugin } = UniverSheetsExchangeClient;
            var { UniverSheetsNumfmtPlugin } = UniverSheetsNumfmt;
            var { UniverDocsPlugin } = UniverDocs;
            var { UniverRenderEnginePlugin } = UniverEngineRender;
            var { UniverFormulaEnginePlugin } = UniverEngineFormula;
            var { UniverUIPlugin } = UniverUi;
            var { UniverDocsUIPlugin } = UniverDocsUi;
            var { UniverSheetsPlugin } = UniverSheets;
            var { UniverSheetsUIPlugin } = UniverSheetsUi;
            var { UniverSheetsPivotTablePlugin } = UniverSheetsPivot;
            var { UniverSheetsPivotTableUIPlugin } = UniverSheetsPivotUi;
            var { UniverEditHistoryLoaderPlugin } = UniverEditHistoryLoader;
            var { UniverCollaborationPlugin } = UniverCollaboration;
            var { UniverCollaborationClientPlugin } = UniverCollaborationClient;
            var { UniverLiveSharePlugin } = UniverLiveShare;
            var { UniverSheetsPrintPlugin } = UniverSheetsPrint;
            var { UniverSheetsThreadCommentPlugin, IThreadCommentMentionDataService } = UniverSheetsThreadComment;
            var { defaultTheme, greenTheme } = UniverDesign;
            var { FUniver } = UniverFacade;
            var { UniverExchangeClientPlugin }= UniverExchangeClient;
            var {UniverLicensePlugin} = UniverLicense;
            var {
              UniverInstanceType,
              Tools,
              IUndoRedoService,
              IAuthzIoService,
              LocaleType,
              Univer,
              IConfigService
            } = window.UniverCore;
          </script>
          <script>
            // ä½ å¥½ï¼Œå¼€å‘è€…ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•ä½¿ç”¨ Univer UMD å®ç°åä½œã€å®æ—¶å…±äº«ã€æ‰“å°å’Œå¯¼å…¥å¯¼å‡ºåŠŸèƒ½
            // å¦‚æœä½ æƒ³ä½¿ç”¨åä½œã€å®æ—¶å…±äº«ã€æ‰“å°å’Œäº¤æ¢åŠŸèƒ½ï¼Œä½ éœ€è¦é…ç½® `universerEndpoint`
            // `universerEndpoint` æ˜¯æä¾›åä½œã€å®æ—¶å…±äº«ã€æ‰“å°å’Œäº¤æ¢æœåŠ¡çš„ Univer åç«¯æœåŠ¡å™¨åœ°å€
            // ä½ å¯ä»¥åœ¨è‡ªå·±çš„æœåŠ¡å™¨ä¸Šéƒ¨ç½² Univer æœåŠ¡å™¨ï¼Œè¯¦è§éƒ¨ç½²æŒ‡å—ï¼šhttps://univer.ai/zh-CN/guides/sheets/server/docker
        
            const universerEndpoint = 'localhost:8000';
        
            // ååŒæ’ä»¶ä» URL ä¸­è·å– unit å‚æ•°ï¼Œå¦‚æœæ²¡æœ‰ unit å‚æ•°ï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°çš„ unit
            const url = new URL(window.location.href)
            const unit = url.searchParams.get('unit')
            if (unit) {
        
              // åŠ è½½åä½œã€æ‰“å°ã€äº¤æ¢çš„å›½é™…åŒ–èµ„æº
              Promise.all([
                fetch('https://unpkg.com/@univerjs-pro/collaboration-client/lib/locale/zh-CN.json').then(res => res.json()),
                fetch('https://unpkg.com/@univerjs-pro/sheets-print/lib/locale/zh-CN.json').then(res => res.json()),
                fetch('https://unpkg.com/@univerjs-pro/exchange-client/lib/locale/zh-CN.json').then(res => res.json()),
                fetch('https://unpkg.com/@univerjs-pro/edit-history-viewer/lib/locale/zh-CN.json').then(res => res.json()),
                fetch('https://unpkg.com/@univerjs-pro/sheets-pivot/lib/locale/zh-CN.json').then(res => res.json()),
                fetch('https://unpkg.com/@univerjs-pro/sheets-pivot-ui/lib/locale/zh-CN.json').then(res => res.json()),
            ]).then((langs) => {
                setup(Tools.deepMerge(UniverUMD['zh-CN'],...langs));
              })
            } else {
              const { UniverInstanceType } = window.UniverCore;
              fetch(`http://${universerEndpoint}/universer-api/snapshot/${UniverInstanceType.UNIVER_SHEET}/unit/-/create`, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  type: UniverInstanceType.UNIVER_SHEET,
                  name: 'New Sheet By Univer',
                  creator: 'user',
                }),
              }).then((response) => {
                if (!response.ok) {
                  throw new Error('Failed to create new sheet')
                }
        
                return response.json()
              }).then((data) => {
                if (!data.unitID) {
                  throw new Error('create unit failed')
                }
        
                url.searchParams.set('unit', data.unitID)
                url.searchParams.set('type', String(UniverInstanceType.UNIVER_SHEET))
                window.location.href = url.toString()
              }).catch((error) => {
                console.error(error)
              })
            }
        
            const setup = (locales) => {
              var univer = new Univer({
                theme: defaultTheme,
                locale: LocaleType.ZH_CN,
                locales:{
                    [LocaleType.ZH_CN]: locales,
                },
                override: [
                  [IAuthzIoService, null],
                  [IUndoRedoService, null]
                ]
              });
              univer.registerPlugin(UniverRenderEnginePlugin);
              univer.registerPlugin(UniverDocsPlugin);
              univer.registerPlugin(UniverFormulaEnginePlugin);
              univer.registerPlugin(UniverSheetsFormulaPlugin);
        
              univer.registerPlugin(UniverUIPlugin, {
                container: "app",
              });
        
              univer.registerPlugin(UniverDocsUIPlugin);
        
              univer.registerPlugin(UniverSheetsPlugin);
              univer.registerPlugin(UniverSheetsUIPlugin);
        
              const mockUser = {
                userID: 'mockId',
                name: 'MockUser',
                avatar: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAInSURBVHgBtZU9TxtBEIbfWRzFSIdkikhBSqRQkJqkCKTCFkqVInSUSaT0wC8w/gXxD4gU2nRJkXQWhAZowDUUWKIwEgWWbEEB3mVmx3dn4DA2nB/ppNuPeWd29mMIPXDr+RxwtgRHeW6+guNPRxogqnL7Dwz9psJ27S4NShaeZTH3kwXy6I81dlRKcmRui88swdq9AcSFL7Buz1Vmlns64MiLsCjzwnIYHLH57tbfFbs7KRaXyEU8FVZofqccOfA5l7Q8LPIkGrwnb2RPNEXWFVMUF3L+kDCk0btDDAMzOm5YfAHDwp4tG74wnzAsiOYMnJ3GoDybA7IT98/jm5+JNnfiIzAS6LlqHQBN/i6b2t/cV1Hh6BfwYlHnHP4AXi5q/8kmMMpOs8+BixZw/Fd6xUEHEbnkgclvQP2fGp7uShRKnQ3G32rkjV1th8JhIGG7tR/JyjGteSOZELwGMmNqIIigRCLRh2OZIE6BjItdd7pCW6Uhm1zzkUtungSxwEUzNpQ+GQumtH1ej1MqgmNT6vwmhCq5yuwq56EYTbgeQUz3yvrpV1b4ok3nYJ+eYhgYmjRUqErx2EDq0Fr8FhG++iqVGqxlUJI/70Ar0UgJaWHj6hYVHJrfKssAHot1JfqwE9WVWzXZVd5z2Ws/4PnmtEjkXeKJDvxUecLbWOXH/DP6QQ4J72NS0adedp1aseBfXP8odlZFfPvBF7SN/8hky1TYuPOAXAEipMx15u5ToAAAAABJRU5ErkJggg==',
                anonymous: false,
                canBindAnonymous: false,
              };
              class CustomMentionDataService {
                trigger = '@';
        
                async getMentions (search) {
                  return [
                    {
                      id: mockUser.userID,
                      label: mockUser.name,
                      type: 'user',
                      icon: mockUser.avatar,
                    },
                    {
                      id: '2',
                      label: 'User2',
                      type: 'user',
                      icon: mockUser.avatar,
                    },
                  ];
                }
              }
        
              univer.registerPlugin(UniverSheetsThreadCommentPlugin, {
                overrides: [[IThreadCommentMentionDataService, { useClass: CustomMentionDataService }]],
              });
        
              // æ³¨å†ŒååŒæ’ä»¶
              univer.registerPlugin(UniverCollaborationPlugin);
              univer.registerPlugin(UniverCollaborationClientPlugin, {
                authzUrl: `http://${universerEndpoint}/universer-api/authz`,
                snapshotServerUrl: `http://${universerEndpoint}/universer-api/snapshot`,
                collabSubmitChangesetUrl: `http://${universerEndpoint}/universer-api/comb`,
                collabWebSocketUrl: `http://${universerEndpoint}/universer-api/comb/connect`,
                // å¦‚æœä½ ä½¿ç”¨äº†å¯¼å…¥å¯¼å‡ºæ’ä»¶ï¼Œéœ€è¦é…ç½®ä»¥ä¸‹å‚æ•°
                uploadFileServerUrl: `http://${universerEndpoint}/universer-api/stream/file/upload`,
                signUrlServerUrl: `http://${universerEndpoint}/universer-api/file/{fileID}/sign-url`,
              });
        
              // æ³¨å†Œå®æ—¶å…±äº«æ’ä»¶
              univer.registerPlugin(UniverLiveSharePlugin)
        
              // æ³¨å†Œæ‰“å°æ’ä»¶
              univer.registerPlugin(UniverSheetsPrintPlugin)
        
              // æ³¨å†Œå¯¼å…¥å¯¼å‡ºæ’ä»¶
              univer.registerPlugin(UniverExchangeClientPlugin, {
                uploadFileServerUrl: `http://${universerEndpoint}/universer-api/stream/file/upload`,
                importServerUrl: `http://${universerEndpoint}/universer-api/exchange/{type}/import`,
                exportServerUrl: `http://${universerEndpoint}/universer-api/exchange/{type}/export`,
                getTaskServerUrl: `http://${universerEndpoint}/universer-api/exchange/task/{taskID}`,
                signUrlServerUrl: `http://${universerEndpoint}/universer-api/file/{fileID}/sign-url`,
              })
              univer.registerPlugin(UniverSheetsExchangeClientPlugin)
            }
          </script>
        </body>
        </html>
      ```
    </Tabs.Tab>
  </Tabs>
</Steps>

## Univer æœåŠ¡ç«¯

åœ¨å‰é¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å·²ç»æ¥å…¥ Univer çš„æœåŠ¡ç«¯ï¼ˆUniver Serverï¼‰ï¼Œè¿™äº›åŠŸèƒ½åŒ…æ‹¬ï¼š

* å¯¼å…¥å¯¼å‡º
* ååŒç¼–è¾‘
* Live Share

è¯·å‚è€ƒ [æœåŠ¡æ¦‚è¿°](/guides/sheets/pro-features/server/overview) ä»¥è¿›ä¸€æ­¥äº†è§£ Univer æœåŠ¡ç«¯ã€‚
import { Callout, Steps, Tabs } from 'nextra/components'
import VersionBadge from '@/components/version-badge'
import FeatureMeta from '@/components/feature-meta'

# 使用水印 <VersionBadge version="0.4.2+" />

<FeatureMeta texts={['✅', '-', '-', '-', '❌ 通过 plugin 引入' ]} />

水印功能旨在为网页或应用提供灵活且安全的水印方案。通过该功能，开发者可以在页面上动态生成文本或图片水印，以防止内容未经授权的使用或传播。并支持多种配置。

水印支持三种设置方式，分别为 UI 界面、Facade API、和插件配置。
水印类型支持三种类型，分别是用户信息类型、自定义图片类型、自定义文本类型，水印的展示只支持某一种类型的展示，优先级为用户信息类型 > 自定义图片类型 > 自定义文本类型。

## Presets 安装

<Tabs items={['pnpm', 'npm']}>
  <Tabs.Tab>
    ```shell
    pnpm add @univerjs/watermark
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```shell
    npm install @univerjs/watermark
    ```
  </Tabs.Tab>
</Tabs>

```ts {4-5,7,9,17,25}
import { createUniver, defaultTheme, LocaleType, Tools } from '@univerjs/presets';
import { UniverDocsCorePreset } from '@univerjs/presets/preset-docs-core';
import DocsCoreZhCN from '@univerjs/presets/preset-docs-core/locales/zh-CN';
import { UniverWatermarkPlugin } from '@univerjs/watermark';
import watermarkZhCN from '@univerjs/watermark/locale/zh-CN';

import '@univerjs/watermark/lib/index.css';

import '@univerjs/watermark/facade';

const { univerAPI } = createUniver({
    locale: LocaleType.ZH_CN,
    locales: {
        zhCN: Tools.deepMerge(
            {},
            DocsCoreZhCN,
            watermarkZhCN,
        ),
    },
    theme: defaultTheme,
    presets: [
        UniverDocsCorePreset(),
    ],
    plugins: [
      UniverWatermarkPlugin,
    ],
});
```

## 高级安装

<Tabs items={['pnpm', 'npm']}>
  <Tabs.Tab>
    ```shell
    pnpm add @univerjs/watermark
    ```
  </Tabs.Tab>
  <Tabs.Tab>
    ```shell
    npm install @univerjs/watermark
    ```
  </Tabs.Tab>
</Tabs>

```typescript {2-3,5,7,14,19}
import { LocaleType, Tools } from '@univerjs/core';
import { UniverWatermarkPlugin } from '@univerjs/watermark';
import watermarkZhCN from '@univerjs/watermark/locale/zh-CN';

import '@univerjs/watermark/lib/index.css';

import '@univerjs/watermark/facade';

const univer = new Univer({
  theme: defaultTheme,
  locale: LocaleType.ZH_CN,
  locales: {
    [LocaleType.ZH_CN]: Tools.deepMerge(
      watermarkZhCN
    ),
  },
});

univer.registerPlugin(UniverWatermarkPlugin);
```

## 配置

```typescript
univer.registerPlugin(UniverWatermarkPlugin, {
    textWatermarkSettings: {
        content: "Univer",
    }
})
```

详细的配置信息可以在 [GitHub](https://github.com/dream-num/univer/blob/d0054f3e690d9d3cf9715b59a97a8cb95f65a6c8/packages/watermark/src/controllers/config.schema.ts#L24) 上找到。

## Facade API 

### 设置水印

```typescript
univerAPI.setWatermark("text", { content: "hello", repeat: true })
```

### 移除水印

```typescript
univerAPI.setWatermark(null);
```

## 参考链接

* [API reference](https://github.com/dream-num/univer/blob/d0054f3e690d9d3cf9715b59a97a8cb95f65a6c8/packages/facade/src/apis/facade.ts#L555)
